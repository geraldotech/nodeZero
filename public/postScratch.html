<!DOCTYPE html>
<html lang="en" style="color-scheme: dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home Page</title>
  </head>
  <body>
    <button>Post</button>
    <script>
      //const BASE = `http://localhost:3333/videos`
      const BASE = `https://node-do-zerp.onrender.com/videos`
      //const BASE = `https://node-zero.vercel.app/videos`

      async function getvideos(url) {
        const req = await fetch(url)
        const res = await req.json()
        console.warn('dados from:', res)
        Render(res)
      }

      function Render(data) {
        data.forEach((value) => {
          const root = document.createElement('div')
          const h2 = document.createElement('h2')
          const p = document.createElement('p').cloneNode()

          h2.innerText = value.title
          p.innerText = `ID: ${value.id} - Description: ${value.description} - Duration: ${value.duration}`
          root.append(h2, p)
          document.body.append(root)
        })
      }

      getvideos(BASE)

      const post = {
        title: 'JavaScript Arrays and String Methods',
        description: 'Esse Ã© o primeiro video',
        duration: 200,
      }

      const baseURL2 = `https://node-do-zerp.onrender.com/videos`
      const btn = document.querySelector('button')
      btn.onclick = function (event) {
        //event.preventDefault();
        const ajaxn = new XMLHttpRequest()

        ajaxn.open('POST', baseURL2)
        ajaxn.setRequestHeader('content-Type', 'application/json')
        const json = JSON.stringify(post)
        //const json = JSON.stringify(Object.fromEntries(post))
        console.log(post)
        ajaxn.send(json)
      }
    </script>
  </body>
</html>
